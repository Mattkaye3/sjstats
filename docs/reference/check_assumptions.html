<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Check model assumptions — check_assumptions • sjstats</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Check model assumptions — check_assumptions" />

<meta property="og:description" content="
outliers() detects outliers in (generalized) linear models.
heteroskedastic() checks a linear model for (non-)constant error variance.
autocorrelation() checks for independence of errors.
normality() checks linear models for (non-)normality of residuals.
multicollin() checks predictors of linear models for multicollinearity.
check_assumptions() checks all of the above assumptions.
" />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sjstats</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.17.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/anova-statistics.html">Statistics for Anova Tables</a>
    </li>
    <li>
      <a href="../articles/bayesian-statistics.html">Statistics for Bayesian Models</a>
    </li>
    <li>
      <a href="../articles/mixedmodels-statistics.html">Statistics for Mixed Effects Models</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/strengejacke/sjstats">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Check model assumptions</h1>
    <small class="dont-index">Source: <a href='https://github.com/strengejacke/sjstats/blob/master/R/check_model_assumptions.R'><code>R/check_model_assumptions.R</code></a></small>
    <div class="hidden name"><code>check_assumptions.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <ul>
<li><p><code>outliers()</code> detects outliers in (generalized) linear models.</p></li>
<li><p><code>heteroskedastic()</code> checks a linear model for (non-)constant error variance.</p></li>
<li><p><code>autocorrelation()</code> checks for independence of errors.</p></li>
<li><p><code>normality()</code> checks linear models for (non-)normality of residuals.</p></li>
<li><p><code>multicollin()</code> checks predictors of linear models for multicollinearity.</p></li>
<li><p><code>check_assumptions()</code> checks all of the above assumptions.</p></li>
</ul>
    
    </div>

    <pre class="usage"><span class='fu'>check_assumptions</span>(<span class='no'>x</span>, <span class='kw'>model.column</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>as.logical</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)

<span class='fu'>outliers</span>(<span class='no'>x</span>, <span class='kw'>iterations</span> <span class='kw'>=</span> <span class='fl'>5</span>)

<span class='fu'>heteroskedastic</span>(<span class='no'>x</span>, <span class='kw'>model.column</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>autocorrelation</span>(<span class='no'>x</span>, <span class='kw'>model.column</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>normality</span>(<span class='no'>x</span>, <span class='kw'>model.column</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>multicollin</span>(<span class='no'>x</span>, <span class='kw'>model.column</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Fitted <code>lm</code> (for <code>outliers()</code>, may also be a <code>glm</code> model),
or a (nested) data frame with a list-variable that contains fitted model
objects.</p></td>
    </tr>
    <tr>
      <th>model.column</th>
      <td><p>Name or index of the list-variable that contains the fitted
model objects. Only applies, if <code>x</code> is a nested data frame (e.g
with models fitted to <code><a href='bootstrap.html'>bootstrap</a></code> replicates).</p></td>
    </tr>
    <tr>
      <th>as.logical</th>
      <td><p>Logical, if <code>TRUE</code>, the values returned by
<code>check_assumptions()</code> are <code>TRUE</code> or <code>FALSE</code>, indicating
whether each violation of model assumotion holds true or not. If
<code>FALSE</code> (the default), the p-value of the respective test-statistics
is returned.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other arguments, passed down to <code><a href='https://www.rdocumentation.org/packages/car/topics/durbinWatsonTest'>durbinWatsonTest</a></code>.</p></td>
    </tr>
    <tr>
      <th>iterations</th>
      <td><p>Numeric, indicates the number of iterations to remove
outliers.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame with the respective statistics.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>These functions are wrappers that compute various test statistics,
         however, each of them returns a tibble instead of a list of values.
         Furthermore, all functions can also be applied to multiples models
         in stored in <em>list-variables</em> (see 'Examples').
         <br /> <br />
         <code>outliers()</code> wraps <code><a href='https://www.rdocumentation.org/packages/car/topics/outlierTest'>outlierTest</a></code> and iteratively
         removes outliers for <code>iterations</code> times, or if the r-squared value
         (for glm: the AIC) did not improve after removing outliers. The function
         returns a tibble with r-squared and AIC statistics for the original
         and updated model, as well as the update model itself (<code>$updated.model</code>),
         the number (<code>$removed.count</code>) and indices of the removed observations
         (<code>$removed.obs</code>).
         <br /> <br />
         <code>heteroskedastic()</code> wraps <code><a href='https://www.rdocumentation.org/packages/car/topics/ncvTest'>ncvTest</a></code> and returns
         the p-value of the test statistics as tibble. A p-value &lt; 0.05 indicates
         a non-constant variance (heteroskedasticity).
         <br /> <br />
         <code>autocorrelation()</code> wraps <code><a href='https://www.rdocumentation.org/packages/car/topics/durbinWatsonTest'>durbinWatsonTest</a></code>
         and returns the p-value of the test statistics as tibble. A p-value
         &lt; 0.05 indicates autocorrelated residuals. In such cases, robust
         standard errors (see <code><a href='robust.html'>robust</a></code> return more accurate results
         for the estimates, or maybe a mixed model with error term for the
         cluster groups should be used.
         <br /> <br />
         <code>normality()</code> calls <code><a href='https://www.rdocumentation.org/packages/stats/topics/shapiro.test'>shapiro.test</a></code>
         and checks the standardized residuals for normal distribution.
         The p-value of the test statistics is returned as tibble. A p-value
         &lt; 0.05 indicates a significant deviation from normal distribution.
         Note that this formal test almost always yields significant results
         for the distribution of residuals and visual inspection (e.g. qqplots)
         are preferable (see <code><a href='https://www.rdocumentation.org/packages/sjPlot/topics/plot_model'>plot_model</a></code> with
         <code>type = "diag"</code>).
         <br /> <br />
         <code>multicollin()</code> wraps <code><a href='https://www.rdocumentation.org/packages/car/topics/vif'>vif</a></code> and returns
         the maximum vif-value from a model as tibble. If this value is
         larger than about 4, multicollinearity exists, else not.
         In case of multicollinearity, the names of independent
         variables that vioalte contribute to multicollinearity are printed
         to the console.
         <br /> <br />
         <code>check_assumptions()</code> runs all of the above tests and returns
         a tibble with all test statistics included. In case the p-values
         are too confusing, use the <code>as.logical</code> argument, where all
         p-values are replaced with either <code>TRUE</code> (in case of violation)
         or <code>FALSE</code> (in case of model conforms to assumption of linar
         regression).</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>These formal tests are very strict and in most cases violation of model
      assumptions are alerted, though the model is actually ok. It is
      preferable to check model assumptions based on visual inspection
      (see <code><a href='https://www.rdocumentation.org/packages/sjPlot/topics/plot_model'>plot_model</a></code> with <code>type = "diag"</code>).</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='no'>efc</span>)

<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/lm'>lm</a></span>(<span class='no'>barthtot</span> ~ <span class='no'>c160age</span> + <span class='no'>c12hour</span> + <span class='no'>c161sex</span> + <span class='no'>c172code</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>efc</span>)
<span class='fu'>outliers</span>(<span class='no'>fit</span>)</div><div class='output co'>#&gt; <span class='message'>No outliers detected.</span></div><div class='input'><span class='fu'>heteroskedastic</span>(<span class='no'>fit</span>)</div><div class='output co'>#&gt; <span class='message'>Heteroscedasticity (non-constant error variance) detected: p = 0.000</span></div><div class='output co'>#&gt;   heteroskedastic
#&gt; 1    3.885808e-07</div><div class='input'><span class='fu'>autocorrelation</span>(<span class='no'>fit</span>)</div><div class='output co'>#&gt; <span class='message'>Autocorrelated residuals detected: p = 0.000</span></div><div class='output co'>#&gt;   autocorrelation
#&gt; 1               0</div><div class='input'><span class='fu'>normality</span>(<span class='no'>fit</span>)</div><div class='output co'>#&gt; <span class='message'>Non-normality of residuals detected: p = 0.000</span></div><div class='output co'>#&gt;   non.normality
#&gt; 1  1.535796e-13</div><div class='input'><span class='fu'>check_assumptions</span>(<span class='no'>fit</span>)</div><div class='output co'>#&gt; <span style='color: #0000BB;'>
#&gt; # Checking Model-Assumptions
#&gt; 
#&gt; </span><span>  Model: barthtot ~ c160age + c12hour + c161sex + c172code</span><span style='color: #BB0000;'>
#&gt; 
#&gt;                           violated    statistic
#&gt; </span><span>  Heteroskedasticity           yes    p = 0.000
#&gt;   Non-normal residuals         yes    p = 0.000
#&gt;   Autocorrelated residuals     yes    p = 0.000
#&gt;   Multicollinearity             no  vif = 1.153</div><div class='input'>
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/lm'>lm</a></span>(<span class='no'>barthtot</span> ~ <span class='no'>c160age</span> + <span class='no'>c12hour</span> + <span class='no'>c161sex</span> + <span class='no'>c172code</span> + <span class='no'>neg_c_7</span>,
          <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>efc</span>)
<span class='fu'>outliers</span>(<span class='no'>fit</span>)</div><div class='output co'>#&gt; <span class='message'>2 outliers removed in updated model.</span></div><div class='output co'>#&gt;     models adjusted.r2      aic
#&gt; 1 original   0.3458095 7487.639
#&gt; 2  updated   0.3530485 7468.980</div><div class='input'><span class='fu'>check_assumptions</span>(<span class='no'>fit</span>, <span class='kw'>as.logical</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;   heteroskedasticity multicollinearity non.normal.resid autocorrelation
#&gt; 1               TRUE             FALSE             TRUE            TRUE</div><div class='input'>
<span class='co'># apply function to multiple models in list-variable</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>purrr</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>dplyr</span>)
<span class='no'>tmp</span> <span class='kw'>&lt;-</span> <span class='no'>efc</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='bootstrap.html'>bootstrap</a></span>(<span class='fl'>50</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(
    <span class='kw'>models</span> <span class='kw'>=</span> <span class='fu'><a href='https://purrr.tidyverse.org/reference/map.html'>map</a></span>(<span class='no'>strap</span>, ~<span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/lm'>lm</a></span>(<span class='no'>neg_c_7</span> ~ <span class='no'>e42dep</span> + <span class='no'>c12hour</span> + <span class='no'>c161sex</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>.x</span>))
  )

<span class='co'># for list-variables, argument 'model.column' is the</span>
<span class='co'># quoted name of the list-variable with fitted models</span>
<span class='no'>tmp</span> <span class='kw'>%&gt;%</span> <span class='fu'>normality</span>(<span class='st'>"models"</span>)</div><div class='output co'>#&gt;    non.normality
#&gt; 1   3.230058e-19
#&gt; 2   3.827347e-16
#&gt; 3   9.098247e-22
#&gt; 4   9.981165e-19
#&gt; 5   6.428575e-18
#&gt; 6   3.224082e-20
#&gt; 7   2.118794e-19
#&gt; 8   1.288646e-16
#&gt; 9   2.328003e-19
#&gt; 10  8.999720e-21
#&gt; 11  6.353047e-21
#&gt; 12  1.026013e-19
#&gt; 13  2.390006e-19
#&gt; 14  6.701265e-19
#&gt; 15  2.551566e-19
#&gt; 16  3.057700e-18
#&gt; 17  2.117815e-19
#&gt; 18  1.077834e-17
#&gt; 19  7.594577e-18
#&gt; 20  9.239676e-19
#&gt; 21  3.149844e-21
#&gt; 22  5.519879e-20
#&gt; 23  3.637194e-18
#&gt; 24  1.764174e-21
#&gt; 25  6.623029e-19
#&gt; 26  1.181069e-19
#&gt; 27  3.168530e-19
#&gt; 28  4.854560e-18
#&gt; 29  2.001162e-20
#&gt; 30  7.352369e-22
#&gt; 31  1.018042e-20
#&gt; 32  7.376915e-19
#&gt; 33  1.207461e-18
#&gt; 34  4.070908e-16
#&gt; 35  7.510733e-18
#&gt; 36  2.049412e-20
#&gt; 37  1.243810e-19
#&gt; 38  2.813157e-19
#&gt; 39  3.095559e-22
#&gt; 40  8.518521e-21
#&gt; 41  5.261510e-16
#&gt; 42  1.156834e-18
#&gt; 43  5.360721e-21
#&gt; 44  3.306733e-18
#&gt; 45  8.478782e-20
#&gt; 46  1.000268e-20
#&gt; 47  3.684449e-21
#&gt; 48  1.301398e-17
#&gt; 49  3.625559e-21
#&gt; 50  8.619752e-18</div><div class='input'><span class='no'>tmp</span> <span class='kw'>%&gt;%</span> <span class='fu'>heteroskedastic</span>(<span class='st'>"models"</span>)</div><div class='output co'>#&gt;    heteroskedastic
#&gt; 1     1.117145e-06
#&gt; 2     4.136378e-16
#&gt; 3     2.304193e-11
#&gt; 4     2.303091e-13
#&gt; 5     2.989163e-09
#&gt; 6     1.617715e-06
#&gt; 7     2.462472e-06
#&gt; 8     5.650847e-11
#&gt; 9     1.949355e-05
#&gt; 10    9.487583e-12
#&gt; 11    8.865950e-05
#&gt; 12    1.001106e-11
#&gt; 13    9.380742e-09
#&gt; 14    2.692178e-11
#&gt; 15    2.777129e-12
#&gt; 16    1.156712e-08
#&gt; 17    1.142231e-09
#&gt; 18    3.003215e-05
#&gt; 19    3.513974e-10
#&gt; 20    8.914693e-07
#&gt; 21    5.075324e-07
#&gt; 22    1.443102e-04
#&gt; 23    3.889332e-08
#&gt; 24    2.962249e-05
#&gt; 25    1.108236e-11
#&gt; 26    1.494601e-11
#&gt; 27    9.264544e-11
#&gt; 28    2.394459e-08
#&gt; 29    3.738415e-03
#&gt; 30    3.710447e-07
#&gt; 31    2.980297e-12
#&gt; 32    4.978182e-15
#&gt; 33    1.403946e-07
#&gt; 34    1.833919e-14
#&gt; 35    2.311357e-05
#&gt; 36    1.506452e-13
#&gt; 37    3.740443e-08
#&gt; 38    2.266819e-07
#&gt; 39    9.948937e-11
#&gt; 40    8.844100e-08
#&gt; 41    3.306678e-14
#&gt; 42    4.618659e-10
#&gt; 43    4.902720e-07
#&gt; 44    8.314707e-12
#&gt; 45    8.818074e-11
#&gt; 46    8.447289e-10
#&gt; 47    5.206397e-09
#&gt; 48    3.063647e-15
#&gt; 49    1.658216e-08
#&gt; 50    1.059808e-12</div><div class='input'>
# Durbin-Watson-Test from package 'car' takes a little bit longer due
# to simulation of p-values...
</div></span><span class='co'># NOT RUN {</span>
<span class='no'>tmp</span> <span class='kw'>%&gt;%</span> <span class='fu'>check_assumptions</span>(<span class='st'>"models"</span>, <span class='kw'>as.logical</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>reps</span> <span class='kw'>=</span> <span class='fl'>100</span>)
<span class='co'># }</span><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#note">Note</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Daniel Lüdecke.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

